<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8"/>

    <title>Регистрация пользователя</title>

    <link rel="icon" type="image/png" th:href="@{/favicon.ico}"/>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <link type="text/css" rel="stylesheet" th:href="@{/webjars/bootstrap/4.1.3/css/bootstrap.min.css}"/>
    <link type="text/css" rel="stylesheet" th:href="@{/css/style.css}"/>
</head>

<body>

<div th:replace="~{navigation :: navi(Admin)}"/>

<div class="container">

    <h2>Добавление нового товара</h2>

    <div class="border-gray">
        <form  th:action="@{/admin/addNewProduct}" th:object="${product}" method="post" >

            <div class="form-group">
                <label class="form-label">Категория товара</label>
                <select class="form-control" th:field="*{category.id}" >
                    <option th:each="choice : ${categories}"
                            th:value="${choice.id}"
                            th:attr="choiceid=${choice.id},
                                categoryid=*{category.id}, showselected=(${choice.id} == *{category.id})"
                            th:selected="(${choice.id} == *{category.id})"
                            th:readonly="(${choice.id} == *{category.id})"
                            th:text="${choice.title}"></option>
                </select>
            </div>


            <div class="form-group">
                <label class="form-label">Наименование товара</label>
                <input class="form-control" type="text"
                       th:field="*{title}" placeholder="" />
            </div>

            <div class="form-group">
                <label class="form-label">Краткое описание товара</label>
                <textarea class="form-control" type="text"
                          th:field="*{shortDescription}" placeholder="" ></textarea>
            </div>

            <div class="form-group">
                <label class="form-label">Полное описание товара</label>
                <textarea class="form-control" type="text"
                          th:field="*{fullDescription}" placeholder=""></textarea>
            </div>

            <div class="form-group">
                <label class="form-label">Цена</label>
                <input class="form-control" type="number" th:field="*{price}" placeholder=""/>
            </div>

            <div class="form-group">
                <div class="d-grid gap-2 d-md-block">
                    <button type="submit" class="btn btn-primary">Сохранить</button>
                </div>
            </div>

        </form>

        <div th:if="${message} != null" th:text="${message}"
             class="alert alert-success col-xs-offset-1 col-xs-10">
        </div>

        <div th:if="${error} != null" th:text="${error}"
             class="alert alert-danger col-xs-offset-1 col-xs-10">
        </div>

    </div>


    <div class="border-gray">
        <table th:if="${!productsAdded.isEmpty}" class="table">
            <thead>
            <tr>
                <th></th>
                <th>Категория</th>
                <th>Наименование товара</th>
                <th>Цена</th>
                <th>Дата и время добавления</th>
            </tr>
            </thead>

            <tr class="responsive-row" th:each="product : ${productsAdded}">

                <td th:text="${product.id}"/>
                <td th:text="${product.category.title}"/>
                <td>
                    <span style="font-weight: bold;" th:text="${product.title}"></span>
                    <br>
                    <span th:text="${product.shortDescription}"></span>
                </td>
                <td th:text="${product.price}"/>
                <td th:text="${product.createAt}"/>
            </tr>
        </table>
    </div>

</div>
</body>
</html>